<html>
    <head>
        <meta charset="UTF-8">
        <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Repertorio A-frame</title>
        <!-- icono del la pestaña -->
        <link rel="shortcut icon" href="./Biblioteca/Gifs/nerv.gif">
        <!-- link de la libreria para leer las etiquetas de aframe -->
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
          <!-- scripts para enviroments-->
        <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
        <!-- script para gifs -->
        <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
        <script src="https://rawgit.com/mayognaise/aframe-gif-component/master/dist/aframe-gif-component.min.js"></script>
        <!-- para leer animación -->
        <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
        <!-- script para texturas -->
        <script src="https://cdn.jsdelivr.net/npm/aframe-enviropacks@latest/aframe-enviropacks.js"></script>
        <!-- script para texto en 3d -->
        <script
            src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>
        <!-- script para interacciones -->
        <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
        <!-- LIBRERIAS DE COLISIONES Y FÍSICAS-->
        <script
            src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
        <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>
        <!-- scripts movimiento de la cámara -->
        <script> src = "https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js" </script>
        <script> src = "https://unpkg.com/super-hands@2.0.2/dist/super-hands.min.js" </script>
        <!-- scripts para partículas-->
        <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
        <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
        <script
            src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
        <script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
        <script src="https://unpkg.com/aframe-gradient-sky@1.2.0/dist/gradientsky.min.js"></script>
        <!-- scipts para animacion de agua -->
        <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
        <script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
        <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
        <!-- scripts para truco de transparencia en modelos 3d-->
        <script>
            AFRAME.registerComponent('model-opacity', {
                schema: { default: 1.0 },
                init: function () {
                    // this.el.addEventListener('model-loaded', this.update.bind(this));
                    this.el.addEventListener("model-loaded", () => {
                        const object3DEl = this.el.object3DMap;
                        ;
   
   
   
   
                        var mesh = this.el.getObject3D('mesh'); // For hand, the result is undefined
                        // var mesh = this.el.object3DMap.mesh; // For hand, the result is undefined
                        console.log(mesh);
                        var data = this.data;
                        if (!mesh) { return; }
                        mesh.traverse(function (node) {
                            if (node.isMesh) {
                                ;
                                node.material.opacity = data;
                                node.material.transparent = data < 1.0;
                                node.material.needsUpdate = true;
                            }
                        });
                    }, 2000)
   
   
                },
                update: function () {
                    var mesh = this.el.getObject3D('mesh');
                    var data = this.data;
                    if (!mesh) { return; }
                    mesh.traverse(function (node) {
                        if (node.isMesh) {
                            ;
                            node.material.opacity = data;
                            node.material.transparent = data < 1.0;
                            node.material.needsUpdate = true;
                        }
                    });
                }
            });
        </script>
   
    </head>
  <body>


    <a-assets>
        <!-- Imagenes -->
        <img id="gato" src="./Biblioteca/Imagenes/gato.jpg">
        <img id="bubbles" src="./Biblioteca/Imagenes/bubbles.jpg">
        // Videos

        <video id="cat" autoplay loop="true" src="./Biblioteca/Videos/cat.mp4" width="480" height= "620"  ></video>
    </a-assets>




    <a-scene physics="gravity:-25; debug: false">


       <!-- Enviroment  https://github.com/supermedium/aframe-environment-component -->
       <a-entity environment="preset:goldmine; skyType:gradient; horizonColor:#010303; lighting:none; shadow:true; shadowSize:10; fog:0.3; playArea:1.3; stageS
       ize:200; ground:hills; groundYScale:40; groundTexture:walkernoise; groundColor:#454545; groundColor2:#000000; dressing:none; grid:dots; gridColor:#71fd48S"></a-entity>


     <!-- Piso invisible -->
    <a-plane static-body position="0.445 0.030 -1.879" rotation="-90 0 0" color="#0e23aa" scale="200 200" opacity="0"></a-plane>
 
       <!-- Cielo -->
        <a-sphere radius="130" material="src: #night ; side: double;"animation="property:rotation; to: 0 360 0; loop:true; dur:201900"></a-sphere>


        <!-- Camara (Si cambio la posicion no funcionan las paredes estaticas :< )-->
              <!-- Luces (Si añadimos luces, A-frame quita las default automaticamente) -->      
        <a-entity movement-controls kinematic-body>
        <a-entity id="camera" camera position="0 2.5 0" look-controls light="intensity:1; type:spot; penumbra:1; distance:50; angle:45"> 
<a-entity cursor="fuse: true; fuseTimeout: 500" position="0 0 -1" geometry="primitive:ring; radiusInner:0.02; radiusOuter:0.023;" material="color:white; shader:flat" raycaster="objects: .clickable"></a-entity>
        </a-entity>
        </a-entity>


         <!-- Luces (Si añadimos luces, A-frame quita las default automaticamente) -->  
         <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="-0.5 1 1"></a-entity>


<!-- Link para otra pagina -->

<a-entity position="0 0 0" geometry="primitive:plane; width:4; height:4;" 
material="src:#gato; repeat:2 2; transparent:true; alphaTest:0.5; side:double" link="href:index.html"></a-entity>

<!-- pARED -->
<a-box position="-0.383 1.993 -0.884" material="src: #gato" repeat="1 1" scale="4.890 4.49 0.200" static-body></a-box>
<a-box position="-3.150 2.523 7.567" rotation="0 90 0" material="src: #gato" repeat="2 2" scale="12.360 4.49 -0.080" static-body></a-box>
   
<!-- water -->
 <a-entity id="ocean" ocean="density: 20; width: 50; depth: 50; speed: 4; amplitude: 0.5; 
 amplitudeVariance: 0.5; depth: 20; color: #00ffff; opacity: 0.8; metalness: 0.9; wireframe: false; 
 flatShading: false; width: 50; depth: 50; speed: 4; amplitude: 0.5; amplitudeVariance: 0.5; depth: 20; color: #00ffff; 
 opacity: 0.8; metalness: 0.9; wireframe: false; flatShading: false; width: 50; depth: 50; speed: 4; amplitude: 0.5; 
 amplitudeVariance: 0.5; depth: 20; color: #00ffff; opacity: 0.8; metalness: 0.9; wireframe: false; flatShading: false; width: 50; 
 depth: 50; speed: 4; amplitude: 0.5; amplitudeVariance: 0.5; depth: 20; color: #00ffff; opacity: 0.8; metalness: 0.9; wireframe: false; 
 flatShading: false; width: 50; depth: 50; speed: 4; amplitude: 0.5; amplitudeVariance: 0.5; depth: 20; color: #00ffff; opacity: 0.8; metalness: 0.9; 
 wireframe: false; flatShading: false; width: 50; depth: 50; speed: 4; amplitude: 0.5; amplitudeVariance: 0.5; depth: 20; color: #00ffff; opacity: 0.8; 
 metalness: 0.9; wireframe: false; flatShading: false; width: 50; depth: 50; speed: 4; amplitude: 0.5; amplitudeVariance: 0.5; depth: 20; color: #00ffff; 
 opacity: 0.8; metalness: 0.9; wireframe: false; flatShading: false; width: 50; depth: 50; speed: 4;"></a-entity>"


<a-box position="2.30924 2.11754 7.46284" rotation="0 90 0" material="src: #gato" repeat="2 2" scale="12.36 4.49 -0.08" static-body="sphereRadius: NaN" geometry="" velocity=""></a-box>
<a-box position="2.18986 1.993 -3.21566" material="src: #gato" repeat="1 1" scale="4.89 4.49 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 90 0"></a-box>
<a-box position="-2.95587 1.993 -3.21566" material="src: #gato" repeat="1 1" scale="4.89 4.49 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 90 0"></a-box>
<a-box position="-11.77999 1.993 -3.21566" material="src: #gato" repeat="1 1" scale="4.89 4.49 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 90 0" visible=""></a-box>
<a-box position="-9.58903 1.993 -5.67281" material="src: #gato" repeat="1 1" scale="4.89 4.49 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="" visible=""></a-box>
<a-box position="8.70243 1.993 -5.67281" material="src: #gato" repeat="1 1" scale="4.89 4.49 0.48" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="" visible=""></a-box>
<a-box position="6.0297 1.993 -5.275" material="src: #gato" repeat="1 1" scale="4.89 4.49 0.48" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 90 0" visible=""></a-box>
<a-box position="5.889 1.993 4.22972" material="src: #gato" repeat="1 1" scale="4.89 4.49 0.48" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 90 0" visible=""></a-box>
<a-box position="-13.96769 2.523 -0.00372" rotation="0 90 0" material="src: #gato" repeast="2 2" scale="27.83 4.49 -0.08" static-body="sphereRadius: NaN" geometry="" velocity=""></a-box>
<a-box position="14.54648 2.523 -0.00372" rotation="0 90 0" material="src: #gato" repeast="2 2" scale="27.83 4.49 -0.08" static-body="sphereRadius: NaN" geometry="" velocity=""></a-box>
<a-box position="0.21804 2.523 -12.87648" rotation="" material="src: #gato" repeast="2 2" scale="27.83 4.49 -0.08" static-body="sphereRadius: NaN" geometry="" velocity=""></a-box>
<a-box position="-8.50618 1.993 13.06334" material="src: #gato" repeat="1 1" scale="10.46 2.59 0.2" static-body="sphereRadius: NaN" geometry="" velocity=""></a-box>
<a-box position="8.55932 1.993 13.063" material="src: #gato" repeat="1 1" scale="11.97 2.59 0.2" static-body="sphereRadius: NaN" geometry="" velocity=""></a-box>
<a-box position="-10.77496 1.993 4.83975" material="src: #gato" repeat="1 1" scale="6.74 5.74 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 45 0" visible=""></a-box>
<a-box position="-10.77496 1.993 9.86487" material="src: #gato" repeat="1 1" scale="6.74 5.74 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 -45 0" visible=""></a-box>
<a-box position="-5.87044 1.993 7.51311" material="src: #gato" repeat="1 1" scale="6.74 5.74 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="0 -45 0" visible=""></a-box>
<a-box position="0.18971 1.993 -9.27149" material="src: #gato" repeat="1 1" scale="9.1 4.49 0.2" static-body="sphereRadius: NaN" geometry="" velocity="" rotation="" visible=""></a-box>

<a-entity light="angle: 20.72; color: #e01b24; type: spot" rotation="-90 0.01 0" position="-1.24652 50 -0.01102"></a-entity>
<a-image src="#bubbles" scale = "3 3" position="0 10 -5" rotation="0 0 0"></a-image>


<a-entity position="0 12 0" rotation="0 0 0" geometry="primitive:plane; width:4; height:4;" material="shader:gif; src: url(./Biblioteca/Gifs/pepe.gif); repeat:2 2; transparent:true; alphaTest:0.5; side:double"></a-entity>

<a-sphere position="-4.369 1.3381 0.957" static-body radius="1.25" geometry="primitive: dodecahedron" scale=".3 .3 .3"  material="shader: gif; src: url(https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExbThpYzZ5Nmc2NnJqaDE2MGM3YmQ1NWcyd3c3czdvM29yaHo2MDNrdCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l0HlTN69zen0ciJXi/giphy.gif)" ></a-sphere>

<a-sphere position="-8.369 1.3381 0.957" static-body radius="1.25" geometry="primitive: dodecahedron" scale=".3 .3 .3" material="wireframe:true"></a-sphere>

// Llamando videos

<a-video  src="#cat" scale="1.1 1.1 1" position="0 10 -9" ></a-video>

</a-scene>




  </body>


   
  </html>
