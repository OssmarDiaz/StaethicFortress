<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
  <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proyecto A-frame</title>
  <!-- icono del la pestaña -->
  <link rel="shortcut icon" href="./Biblioteca/Gifs/nerv.gif">
  <!-- link de la libreria para leer las etiquetas de aframe -->
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- scripts para enviroments-->
  <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
  <!-- script para gifs -->
  <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
  <script src="https://rawgit.com/mayognaise/aframe-gif-component/master/dist/aframe-gif-component.min.js"></script>
  <!-- para leer animación -->
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <!-- script para texturas -->
  <script src="https://cdn.jsdelivr.net/npm/aframe-enviropacks@latest/aframe-enviropacks.js"></script>
  <!-- script para texto en 3d -->
  <script
    src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>
  <!-- script para interacciones -->
  <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
  <!-- LIBRERIAS DE COLISIONES Y FÍSICAS-->
  <script
    src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
  <script src="https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js"></script>
  <!-- scripts movimiento de la cámara -->
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"> </script>
  <script src="https://unpkg.com/super-hands@2.0.2/dist/super-hands.min.js"></script>
  <!-- scripts para partículas-->
  <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
  <script
    src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
  <script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
  <script src="https://unpkg.com/aframe-gradient-sky@1.2.0/dist/gradientsky.min.js"></script>
  <script src="js/trapezium-primitive.js"></script>
  <!-- scipts para animacion de agua -->
  <!-- <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script> -->
  <script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
  <!-- <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script> -->
  <!-- scripts para truco de transparencia en modelos 3d-->
  <script>
    AFRAME.registerComponent('model-opacity', {
      schema: { default: 1.0 },
      init: function () {
        // this.el.addEventListener('model-loaded', this.update.bind(this));
        this.el.addEventListener("model-loaded", () => {
          const object3DEl = this.el.object3DMap;
          ;




          var mesh = this.el.getObject3D('mesh'); // For hand, the result is undefined
          // var mesh = this.el.object3DMap.mesh; // For hand, the result is undefined
          console.log(mesh);
          var data = this.data;
          if (!mesh) { return; }
          mesh.traverse(function (node) {
            if (node.isMesh) {
              ;
              node.material.opacity = data;
              node.material.transparent = data < 1.0;
              node.material.needsUpdate = true;
            }
          });
        }, 2000)


      },
      update: function () {
        var mesh = this.el.getObject3D('mesh');
        var data = this.data;
        if (!mesh) { return; }
        mesh.traverse(function (node) {
          if (node.isMesh) {
            ;
            node.material.opacity = data;
            node.material.transparent = data < 1.0;
            node.material.needsUpdate = true;
          }
        });
      }
    });
  </script>


<!--   <script>
    AFRAME.registerComponent('stair', {
      schema: {
        steps: { type: 'number', default: 10 },
        radius: { type: 'number', default: 1 },
        height: { type: 'number', default: 0.1 },
        width: { type: 'number', default: 1 },
        color: { type: 'color', default: '#333' }
      },
      init: function () {
        var data = this.data;
        var el = this.el;
        var position = el.getAttribute('position');
        var step = data.height;
        var angle = 0;
        var stepAngle = 360 / data.steps;
        var stepWidth = data.width / data.steps;
        var stepHeight = data.height / data.steps;
        var stepRadius = data.radius / data.steps;
        var stepColor = data.color;
        var stepGeometry = new THREE.BoxGeometry(stepWidth, stepHeight, stepRadius);
        var stepMaterial = new THREE.MeshBasicMaterial({ color: stepColor });
        var stepMesh;
        for (var i = 0; i < data.steps; i++) {
          stepMesh = new THREE.Mesh(stepGeometry, stepMaterial);
          stepMesh.position.x = position.x + data.radius * Math.cos(THREE.Math.degToRad(angle));
          stepMesh.position.y = position.y + step * i;
          stepMesh.position.z = position.z + data.radius * Math.sin(THREE.Math.degToRad(angle));
          stepMesh.rotation.y = THREE.Math.degToRad(angle);
          el.setObject3D('step' + i, stepMesh);
          angle += stepAngle;
        }
      },
      update: function () {
        var data = this.data;
        var el = this.el;
        var position = el.getAttribute('position');
        var step = data.height;
        var angle = 0;
        var stepAngle = 360 / data.steps;
        var stepWidth = data.width / data.steps;
        var stepHeight = data.height / data.steps;
        var stepRadius = data.radius / data.steps;
        var stepColor = data.color;
        var stepGeometry = new THREE.BoxGeometry(stepWidth, stepHeight, stepRadius);
        var stepMaterial = new THREE.MeshBasicMaterial({ color: stepColor });
        var stepMesh;
        for (var i = 0; i < data.steps; i++) { // Corrected from 'data steps' to 'data.steps'
          stepMesh = el.getObject3D('step' + i);
          stepMesh.position.x = position.x + data.radius * Math.cos(THREE.Math.degToRad(angle));
          stepMesh.position.y = position.y + step * i;
          stepMesh.position.z = position.z + data.radius * Math.sin(THREE.Math.degToRad(angle));
          stepMesh.rotation.y = THREE.Math.degToRad(angle);
          angle += stepAngle;
        }
      },
      remove: function () {
        // Remove the stair steps when the component is removed
        var el = this.el;
        for (var i = 0; i < this.data.steps; i++) {
          el.removeObject3D('step' + i);
        }
      }
    });
  </script> -->




</head>

<body>
 
  
  <a-scene stats physics="gravity:-25; debug:false" >


    <a-assets>
   
      <!-- Texturas -->
     
      <img id="paredObs" src="./Biblioteca/Texturas/GameCube - Paper Mario The Thousand-Year Door - Palace of Shadow Backgrounds/Palace of Shadow Stages/aji_2.png"><!-- paredes -->
      <img id="pisoObs"  src="./Biblioteca/Texturas/GameCube - Paper Mario The Thousand-Year Door - Palace of Shadow Backgrounds/Palace of Shadow Stages/las_yuka_1.png"><!-- piso -->
     <img id="skySecretCourse" src="./Biblioteca/Texturas/B_sters.png">
     <img id="skySecretCourse2" src="./Biblioteca/Texturas/nocheCielo.jpg">
<img id="pisoEscalera" src="./Biblioteca/Texturas/GameCube - Paper Mario The Thousand-Year Door - Palace of Shadow Backgrounds/Palace of Shadow Stages/las_kabe_06.png">
<img id="paredFina" src="./Biblioteca/Texturas/GameCube - Paper Mario The Thousand-Year Door - Palace of Shadow Backgrounds/Palace of Shadow Stages/las_kabe_05.png">
<img id="falsoVidrio" src="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Palace of Shadow/Palace of Shadow/las_glass_05.png">
<img id="falsoVidrio2" src="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Palace of Shadow/Palace of Shadow/las_kazari_08.png">
<img id="soclo" src="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Palace of Shadow/Palace of Shadow/las_ohaka_1.png">
      <!-- Videos -->
     
      <!-- Imagenes -->
      <img id="gato" src="./Biblioteca/Imagenes/gato.jpg">
      <img id="cielo" src="./Biblioteca/Imagenes/cielo.jpg">
      <imf id="cielo2" src="./Biblioteca/Modelos/GC/Sunshine/GameCube - Super Mario Sunshine - Night Sky/Night Sky/B_sterJimi_s.png">
      <!-- Modelos-->
      <a-asset-item id="witch" src="./Biblioteca/Modelos/little_witch_academia/scene.gltf"></a-asset-item>
      <a-asset-item id="water" src="./Biblioteca/Modelos/water_cooler/scene-scaled.gltf"></a-asset-item>
      <a-asset-item id="skel" src="./Biblioteca/Modelos/remains/scene-separate1.gltf"></a-asset-item>
      <a-asset-item id="bird" src="./Biblioteca/Modelos/phoenix_bird/scene.gltf"></a-asset-item>
      <a-asset-item id="metroid"
        src="./Biblioteca/Modelos/metroid_primecreaturesmetroid_prime_form_2/scene_metroid.gltf"></a-asset-item>
<a-assets-item id="planetario3D" src="./Biblioteca/Modelos/PMTTYD/observatorio.gltf"></a-assets-item>
      <a-asset-item id="torre" src="./Biblioteca/Modelos/GC/GameCube - Super Mario Sunshine - Sand Bird Tower/torre.gltf"></a-asset-item>


        <!-- escenarios -->

        <a-asset-item id="planetarium" src="./Biblioteca/Modelos/PMTTYD/planetariumSTG.gltf"></a-asset-item>
        <a-asset-item id="palacioWall" src="./Biblioteca/Modelos/PMTTYD/paredPalacio.gltf"></a-asset-item>
        <a-asset-item id="palacioTorre" src="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Hooktail Castle/tower.gltf"></a-asset-item>
        <a-asset-item id="stageLight"  src="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Stage Light/stageLight.gltf"></a-asset-item>
        <a-asset-item id="estructuraAux1" src="./Biblioteca/Modelos/zelda/estructuraAux1.gltf"></a-asset-item>
        <a-asset-item id="estructuraAux2" src="./Biblioteca/Modelos/zelda/estructuraAux2.2.gltf"></a-asset-item>
<a-asset-item id="greatTree" src="./Biblioteca/Modelos/escenarios/greatTree.gltf"></a-asset-item>
<a-asset-item id="moon" src="./Biblioteca/Modelos/escenarios/moon.gltf"></a-asset-item>


       </a-assets>
       <a-sky id="sky" src="#skySecretCourse2" radius="500" rotation="0 -90 0" animation="property: rotation; to: 0 270 0; dur: 300000; easing: linear; loop: true"></a-sky>
    <!-- <a-entity
    environment="preset: tron;   grid:1x1; gridColor:#fd4444; ground:hills; groundTexture:#pisoObs;  fog:0"></a-entity> -->

    <a-entity movement-controls kinematic-body>
      <a-entity id="camera"  wasd-controls="enabled: true; acceleration:50" camera position="0 2.5 0" look-controls>
        <a-entity cursor="fuse: true; fuseTimeout: 500" position="0 0 -1" geometry="primitive:ring; radiusInner:0.02; radiusOuter:0.023;" material="color:white; shader:flat" raycaster="objects: clickable"></a-entity>
      </a-entity>
    </a-entity>
  

    <a-plane static-body position="0.0 0.0 0" rotation="-90 0 0" color="#0e23aa" scale="200 200"
    opacity="1" material="src:#pisoObs " repeat="100 100"></a-plane>
    <!-- Escalera en espiral -->

<!-- Spiral Staircase -->
<a-entity id="staircase"></a-entity> <!-- Adjust the position to place it correctly in the scene -->
<!-- First staircase -->
<a-entity position="-42.550 10 77.055" 
spiral-staircase="numSteps: 97; stepHeight: 0.5; radius: 5; stepWidth: 3; stepDepth: 1.5; rotationPerStep: 12; color: #ff0000"></a-entity>



<!-- Paredes internas de la torre -->

<!-- Torre Hexagonal -->
 <!--  <a-box position="25 10 0" width="1" height="60" depth="28.7" material="src:#paredObs; side:double; alphaTest:0.5;" repeat = "10 10"  rotation="0 0 0"></a-box>

<a-box position="12.5 10 -21.65" width="1" height="60" depth="28.7" material="src:#paredObs; side:double; alphaTest:0.5;" repeat = "10 10" 
  rotation="0 60 0"></a-box>
<a-box position="-12.5 10 -21.65" width="1" height="60" depth="28.7" material="src:#paredObs; side:double; alphaTest:0.5;" repeat = "10 10" 
  rotation="0 120 0"></a-box>
<a-box position="-25 10 0" width="1" height="60" depth="28.7" material="src:#paredObs; side:double; alphaTest:0.5;" repeat = "10 10" 
  rotation="0 180 0"></a-box>
<a-box position="-12.5 10 21.65" width="1" height="60" depth="28.7" material="src:#paredObs; side:double; alphaTest:0.5;" repeat = "10 10" 
  rotation="0 240 0"></a-box>
<a-box position="12.5 10 21.65" width="1" height="60" depth="28.7" material="src:#paredObs; side:double; alphaTest:0.5;" repeat = "10 10" 
  rotation="0 300 0"></a-box>  -->

  <!-- test paredes pequeñas -->
  <a-box position="-25 5.24132 0" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5; rotation:0 45 0" repeat="5 2" rotation="0 180 0" geometry="height: 10" model-opacity="0.1"></a-box> <!-- Hacia estructura aux -->
  <a-box position="-25 17.49852 0" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 180 0" geometry="height: 5" model-opacity="1"></a-box>
  <a-box position="-12.5 5.10064 21.65" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 239.99999999999997 0" geometry="height: 10" model-opacity="0.1"></a-box> <!-- detras de observ -->
  <a-box position="-12.5 17.49524 21.65" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 239.99999999999997 0" geometry="height: 5" model-opacity="1"></a-box>
  <a-box position="12.5 4.84342 21.65" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 300 0" geometry="height: 10" model-opacity="0.1"></a-box><!-- hacia estructura aux -->
  <a-box position="12.5 17.48439 21.65" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 300 0" geometry="height: 5" model-opacity="1"></a-box>
  <a-box position="25 4.73058 0" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="" geometry="height: 10" model-opacity="1"></a-box>
  <a-box position="12.5 5.01718 -21.65" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 59.99999999999999 0" geometry="height: 10" model-opacity="0.1"></a-box><!-- al templo del tiempo -->
  <a-box position="25 17.17893 0" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 5" rotation="" geometry="height: 5" model-opacity="1"></a-box>
  <a-box position="12.5 17.43687 -21.65" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 59.99999999999999 0" geometry="height: 5" model-opacity="1"></a-box>
  <a-entity gltf-model="./Biblioteca/Modelos/PMTTYD/paredPalacio.gltf" position="-12.1282 0.07157 -21.90841" rotation="0 30.57 0" scale="0.73 0.55 0.5" model-opacity="1"></a-entity> <!-- estrellas girando -->
  <a-box position="-12.5 17.65927 -21.65" width="1" height="60" depth="28.7" material="src: #paredFina; side: double; alphaTest: 0.5" repeat="5 2" rotation="0 119.99999999999999 0" geometry="height: 5" model-opacity="1"></a-box>

  <!-- test puerta -->


  <!-- Primer piso -->
 <a-entity geometry="primitive: cylinder; radius: 7.5; height: 20;segmentsRadial: 6 " 
 position="0 25 0" material="color: #FF5733" segmentsRadial: 6 static-body></a-entity>
 <a-box position="8.99246 10 -14.62035" width="12" height="0.2" depth="5" 
 rotation="0 -29.999999999999996 0" material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body></a-box>
 <a-box position="-8.40041 10 15.33899" width="12" height="0.2" depth="5" rotation="0 -29.999999999999996 0" material="color: #333; side: double" 
 geometry="width: 29.81; depth: 15.04"  visible="" static-body></a-box>
 <a-box position="-8.45142 10 -14.62035" width="12" height="0.2" depth="5" rotation="0 -149.35 0" 
 material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body ></a-box>
 <a-box position="8.83 10 15.34" width="12" height="0.2" depth="5" rotation="0 -149.35 0" 
 material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body ></a-box>
 <a-box position="17.982 10 0" width="12" height="0.2" depth="5" rotation="0 90 0" 
 material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body ></a-box>
 <a-box position="-17.57545 10 0" width="12" height="0.2" depth="5" rotation="0 90 0" 
 material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body></a-box>

  <!-- segundo piso -->
 
  <a-box position="8.99246 20 -14.62035" width="12" height="0.2" depth="5" 
  rotation="0 -29.999999999999996 0" material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body></a-box>
  <a-box position="-8.40041 20 15.33899" width="12" height="0.2" depth="5" rotation="0 -29.999999999999996 0" material="color: #333; side: double" 
  geometry="width: 29.81; depth: 15.04"  visible="" static-body></a-box>
  <a-box position="-8.45142 20 -14.62035" width="12" height="0.2" depth="5" rotation="0 -149.35 0" 
  material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body ></a-box>
  <a-box position="8.83 20 15.34" width="12" height="0.2" depth="5" rotation="0 -149.35 0" 
  material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body ></a-box>
  <a-box position="17.982 20 0" width="12" height="0.2" depth="5" rotation="0 90 0" 
  material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body ></a-box>
  <a-box position="-17.57545 20 0" width="12" height="0.2" depth="5" rotation="0 90 0" 
  material="color: #333; side: double" geometry="width: 29.81; depth: 15.04" static-body></a-box>
 
  <a-entity class="portal" mixin="portal" oasis-portal="href:oasis/aRUUwwDhzg.html" material="pano:assets/img/portal/forest.jpg" 
  raycastable="" animation__mouseenterscale="loop:NaN;dir:alternate;easing:easeInOutQuad;from:1 1 1;property:scale;startEvents:mouseenter;pauseEvents:mouseleave;to:1.1 1.1 1.1" animation__mouseenter="from:#999" animation__mouseleave="to:#999" position="10 0 0"> <a-entity class="portalEffect1" obj-model="obj:assets/models/portal/portal.obj" 
  additive="" material="color:#999;opacity:0.6;depthWrite:false;shader:flat;transparent:true;src:[object HTMLImageElement]" 
  position="0 0 -0.017" rotation="125.7479938522872 90 90" scale="3.116 3.116 3.116" 
  animation="property:object3D.rotation.x;from:0;to:6.283185;dur:10000;loop:true;easing:linear"></a-entity> 
  <a-entity class="portalEffect2" obj-model="obj:assets/models/portal/portal.obj" additive="" 
  material="color:#f37132;opacity:0.6;depthWrite:false;shader:flat;transparent:true;src:[object HTMLImageElement]" 
  position="0 0 -0.058" rotation="323.9999841599155 90 90" scale="3.078 0.969 3.078" 
  animation="property:object3D.rotation.x;from:0;to:6.283185;dur:15000;loop:true;easing:linear"></a-entity> 
  <a-entity class="portalText" mixin="slice font" slice9="color:#111;height:0.3;width:2.5;opacity:0.7" 
  text="color:#999;align:center;value:Shyke HIX9;side:double;width:4;zOffset:0.01" position="0 1.3 0"></a-entity> </a-entity>

  
  <!-- Seccion 1 -->

  <!-- camino -->
  <a-box position="55.61666 10 0.52702" width="1" height="60" depth="28.7" material="src: [object HTMLImageElement]; side: double; alphaTest: 0.5" repeat="10 10" rotation="0 90 90" geometry="width: 0.5; height: 5; depth: 62" static-body></a-box>

   <!-- Seccion 2 -->
   <a-box position="-26.43148 10 46.78712" width="1" height="60" depth="28.7" material="src: [object HTMLImageElement]; side: double; alphaTest: 0.5" repeat="10 10" rotation="0 149.88 90" geometry="width: 0.5; height: 5; depth: 60" static-body></a-box>
  
<!-- Seccion 3 -->

<a-box position="-26.64809 10 -49.42072" width="1" height="60" depth="28.7" material="src: [object HTMLImageElement]; side: double; alphaTest: 0.5" repeat="10 10" rotation="0 29.999999999999996 90" geometry="width: 0.5; height: 5; depth: 62" static-body></a-box>



<!-- Modelos de escenario -->

<!-- <a-entity gltf-model="#planetarium" position="0 0 -18" rotation="0 0 0" scale="0.5 0.5 0.5" model-opacity="1"></a-entity>
 -->

 <a-entity gltf-model="./Biblioteca/Modelos/PMTTYD/paredPalacio.gltf" position="23.87932 0 -0.09346" rotation="0 -90 0" scale="0.69 0.54 0.5" model-opacity="1"></a-entity>
<a-entity gltf-model="#planetario3D" position="0 40 0" rotation="0 0 0" scale="1.5 1.5 1.5" model-opacity="1"></a-entity>
<a-entity gltf-model="#torre" position="25.40679 0 14.97089" rotation="" scale="0.2 0.5 0.2" model-opacity="1"></a-entity>
<a-entity gltf-model="#torre" position="25.40679 0 -14.69207" rotation="" scale="0.2 0.5 0.2" model-opacity="1"></a-entity>
<a-entity gltf-model="#torre" position="-25.0376 0 -14.69207" rotation="" scale="0.2 0.5 0.2" model-opacity="1"></a-entity>
<a-entity gltf-model="#torre" position="-25.0376 0 14.42082" rotation="" scale="0.2 0.5 0.2" model-opacity="1"></a-entity>
<a-entity gltf-model="#torre" position="0.04168 0 29.5908" rotation="" scale="0.2 0.5 0.2" model-opacity="1"></a-entity>
<a-entity gltf-model="#torre" position="0.04168 0 -29.36388" rotation="" scale="0.2 0.5 0.2" model-opacity="1"></a-entity>

<a-entity gltf-model="#palacioTorre" position="-43.87526 10.34439 77.05512" rotation="0 59.99999999999999 0" 
scale="0.5 0.5 0.5" model-opacity="0.5"></a-entity>
<a-entity gltf-model="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Hooktail Castle/tower.gltf" 
position="-41.89614 6.85383 -75.76255" rotation="0 -59.99999999999999 0" scale="0.5 0.5 0.5" model-opacity="0.5"></a-entity>
<a-entity gltf-model="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Hooktail Castle/tower.gltf" 
position="86.36249 6.85383 0.75892" rotation="0 -180 0" scale="0.5 0.5 0.5" model-opacity="0.5"></a-entity>

<a-entity gltf-model="#stageLight" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" model-opacity="1"></a-entity>

<a-entity gltf-model="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Stage Light/stageLight.gltf" 
position="3.54618 8.24018 -24.73688" rotation="-21.51 -1.73 29.999999999999996" scale="0.5 0.5 0.5" model-opacity="1"></a-entity>
<a-entity gltf-model="./Biblioteca/Modelos/GC/PP/GameCube - Paper Mario The Thousand-Year Door - Stage Light/stageLight.gltf" 
position="22.22308 8.24018 -14.05911" rotation="-26.75 -1.73 -29.999999999999996" scale="0.5 0.5 0.5" model-opacity="1"></a-entity>

<a-entity light="type: point; intensity: 0.75; distance: 50; decay: 2"
          position="3.54618 8.24018 -24.73688"></a-entity>
<a-entity light="type: point; intensity: 0.75; distance: 50; decay: 2" 
          position="22.22308 8.24018 -14.05911"></a-entity>

<a-entity light="type: directional; intensity: 1.0" position="0 1 0"></a-entity>

<a-entity light="type: ambient; color: #FFFFFF; intensity: 0.9s;"></a-entity>
<a-entity gltf-model="./Biblioteca/Modelos/PMTTYD/paredPalacio.gltf" position="-12.57204 0.07157 22.11362" rotation="0 150 0" scale="0.73 0.56 0.5" model-opacity="1"></a-entity>
<!-- onclick="window.open('https://www.larissaloza.com.mx/', '_blank') -->

<!-- PRUEBAS DE OBJETOS -->
 <!-- ##########################################################################################################
  ##############################################################################################################
  ############################################################################################################## -->

<a-entity gltf-model="./Biblioteca/Modelos/zelda/estructuraAux1.gltf" position="-4.09867 -26.85464 3.60814" scale="0.2 0.2 0.2" model-opacity="1"></a-entity>
<a-entity gltf-model="./Biblioteca/Modelos/zelda/estructuraAux2.2.gltf" position="29.2316 -5.1604 -50.42254" scale="5 5 5" model-opacity="1" rotation="0 -29.999999999999996 0"></a-entity>
<a-entity gltf-model="./Biblioteca/Modelos/zelda/estructuraAux3.gltf" position="-83.41238 0 0" scale="0.2 0.2 0.2" model-opacity="1" rotation="0 90 0"></a-entity>
<a-entity gltf-model="./Biblioteca/Modelos/escenarios/moon.gltf" position="-13.815 -2.241 -23.644" scale="0.45 0.45 0.45" model-opacity="0.9" rotation="0 -150 0" animation="property: rotation; to: 0 -150 360; dur: 100000; easing: linear; loop: true"></a-entity>
<!-- <a-entity gltf-model="./Biblioteca/Modelos/escenarios/greatTree.gltf" position="0 0 0" scale="0.5 0.5 0.5" model-opacity="0.99"></a-entity> -->
<a-box position="4.74205 0.57935 -26.72489" width="12" height="0.2" depth="5" rotation="90 -29.999999999999996 0"  geometry="width: 10; depth: 1.15" material="src: #soclo; side: double; alphaTest: 0.5" repeat="5 1"  ></a-box>
<a-box position="20.76327 0.57935 -17.47079" width="12" height="0.2" depth="5" rotation="90 -29.999999999999996 0" geometry="width: 10; depth: 1.15" material="src: #soclo; side: double; alphaTest: 0.5" repeat="5 1"></a-box>


<a-box position="4.74205 5.26101 -26.72489" width="12" height="0.3" depth="5" material="src:#falsoVidrio; side: double; alphaTest: 0.5" repeat="2 1" rotation="90 -30 0" geometry="width: 10; height: 0.1; depth: 7.99" model-opacity="0.5"></a-box>






<!-- ESCALERRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA -->
<a-entity position="0 1 -57.292" spiral-staircase="numSteps: 50; stepHeight: 0.5; radius: 8; stepWidth: 3; stepDepth: 1.5; rotationPerStep: 12; color: #ff0000" ></a-entity>
  </a-scene>

 




















<!--  Scripts de objetos en la escena -->


<script>
  // Parametros de la escalera en espiral
  const numSteps = 100;      
  const stepHeight = 0.5;    
  const radius = 10;          
  const stepWidth = 5;     
  const stepDepth = 1.5;    
  const rotationPerStep = 15; 

  // Reference to the staircase entity
  const staircase = document.getElementById('staircase');

  for (let i = 0; i < numSteps; i++) {
    const angleDeg = i * rotationPerStep;
    const angleRad = THREE.Math.degToRad(angleDeg); // Convert degrees to radians

    // Calculate position of the step based on spiral formula
    const x = radius * Math.cos(angleRad);
    const y = i * stepHeight;
    const z = radius * Math.sin(angleRad);

    // Create the step
    const step = document.createElement('a-box');
    step.setAttribute('width', stepWidth);
    step.setAttribute('height', 0.1); // Thickness of the step
    step.setAttribute('depth', stepDepth);
    step.setAttribute('color', '#8B4513'); // Step color (brown for wood effect)
    step.setAttribute('material', 'src: #pisoEscalera; repeat: 2 2; side: double; alphaTest: 0.5;'); // Step texture

    // Set the position and rotation of the step
    step.setAttribute('position', `${x} ${y} ${z}`);
    step.setAttribute('rotation', `0 ${-angleDeg} 0`); // Rotate step to face the center of the spiral
    step.setAttribute('static-body', ''); // Make the step static so it doesn't fall

    // Add the step to the staircase
    staircase.appendChild(step);
  }
</script>


<script>
  AFRAME.registerComponent('spiral-staircase', {
    schema: {
      numSteps: {type: 'number', default: 100},
      stepHeight: {type: 'number', default: 0.5},
      radius: {type: 'number', default: 10},
      stepWidth: {type: 'number', default: 5},
      stepDepth: {type: 'number', default: 1.5},
      rotationPerStep: {type: 'number', default: 15},
      color: {type: 'color', default: '#8B4513'}
    },
    init: function () {
      const data = this.data;
      const el = this.el;

      for (let i = 0; i < data.numSteps; i++) {
        const angleDeg = i * data.rotationPerStep;
        const angleRad = THREE.Math.degToRad(angleDeg); // Convert degrees to radians

        // Calculate position of the step based on spiral formula
        const x = data.radius * Math.cos(angleRad);
        const y = i * data.stepHeight;
        const z = data.radius * Math.sin(angleRad);

        // Create the step
        const step = document.createElement('a-box');
        step.setAttribute('width', data.stepWidth);
        step.setAttribute('height', 0.1); // Thickness of the step
        step.setAttribute('depth', data.stepDepth);
        step.setAttribute('color', data.color);

        // Set the position and rotation of the step
        step.setAttribute('position', `${x} ${y} ${z}`);
        step.setAttribute('rotation', `0 ${-angleDeg} 0`);
        step.setAttribute('static-body', ''); // Make the step static

        // Add the step to the entity
        el.appendChild(step);
      }
    }
  });
</script>




</body>

</html>